<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Vine - Christian Learning Platform</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <style>
    :root {
      /* Color Variables - Restored Blue Theme */
      --primary: #2d5282;
      --primary-light: #4a69a7;
      --primary-dark: #1a365d;
      --secondary: #5cbbf6;
      --secondary-light: #7dcbf9;
      --accent: #5cbbf6;
      --success: #4CAF50;
      --warning: #FF9800;
      --error: #F44336;
      --white: #FFFFFF;
      --black: #000000;
      
      /* Surface Colors */
      --surface: #FFFFFF;
      --surface-elevated: #FFFFFF;
      --surface-variant: #f9fafb;
      --background: #f9fafb;
      
      /* Text Colors */
      --text-primary: #1a202c;
      --text-secondary: #4a5568;
      --text-tertiary: #718096;
      --text-on-primary: #FFFFFF;
      --text-on-secondary: #FFFFFF;
      --text-on-accent: #FFFFFF;
      --divider: #e2e8f0;
      
      /* Spacing Variables */
      --spacing-xs: 4px;
      --spacing-sm: 8px;
      --spacing-md: 16px;
      --spacing-lg: 24px;
      --spacing-xl: 32px;
      --spacing-xxl: 48px;
      
      /* Border Radius */
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-xxl: 32px;
      --radius-full: 9999px;
      
      /* Shadows */
      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.05);
      --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.05);
      --nav-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
      --card-shadow: 0 4px 20px rgba(0,0,0,0.08);
      --card-hover-shadow: 0 8px 30px rgba(0,0,0,0.12);
      --header-shadow: 0 4px 20px rgba(0,0,0,0.1);
      
      /* Transitions */
      --transition-fast: 0.15s ease;
      --transition-standard: 0.3s ease;
      --transition-slow: 0.5s ease;
      
      /* Gradients */
      --header-gradient: linear-gradient(135deg, #2d5282 0%, #1a365d 100%);
    }
    
    /* Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      color: var(--text-primary);
      background-color: var(--background);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      padding-bottom: 70px; /* Space for bottom nav */
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-family: 'Playfair Display', serif;
      font-weight: 600;
      line-height: 1.3;
      margin-bottom: var(--spacing-md);
    }
    
    h1 {
      font-size: 2.5rem;
    }
    
    h2 {
      font-size: 2rem;
    }
    
    h3 {
      font-size: 1.75rem;
    }
    
    h4 {
      font-size: 1.5rem;
    }
    
    h5 {
      font-size: 1.25rem;
    }
    
    h6 {
      font-size: 1rem;
    }
    
    p {
      margin-bottom: var(--spacing-md);
    }
    
    a {
      color: var(--primary);
      text-decoration: none;
      transition: var(--transition-standard);
    }
    
    a:hover {
      color: var(--primary-light);
    }
    
    img {
      max-width: 100%;
      height: auto;
    }
    
    button {
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      transition: var(--transition-standard);
    }
    
    /* Layout */
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 var(--spacing-md);
    }
    
    .section {
      padding: var(--spacing-xl) 0;
    }
    
    /* Header */
    .header {
      background: var(--header-gradient);
      color: var(--text-on-primary);
      padding: var(--spacing-lg) 0;
      position: relative;
      overflow: hidden;
      box-shadow: var(--header-shadow);
    }
    
    .header::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 100%;
      height: 20px;
      background: var(--surface);
      border-radius: 50% 50% 0 0 / 100% 100% 0 0;
    }
    
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      font-family: 'Playfair Display', serif;
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--white);
      display: flex;
      align-items: center;
    }
    
    .logo .material-icons-round {
      margin-right: var(--spacing-xs);
    }
    
    .header-actions {
      display: flex;
      align-items: center;
    }
    
    .header-actions .material-icons-round {
      font-size: 1.5rem;
      margin-left: var(--spacing-md);
      cursor: pointer;
      color: var(--white);
    }
    
    .notification-badge {
      position: relative;
      display: inline-flex;
    }
    
    .notification-badge .badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: #ff5252;
      color: white;
      border-radius: 50%;
      width: 16px;
      height: 16px;
      font-size: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    /* Section Headers */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-lg);
      position: relative;
    }
    
    .section-header::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      width: 3px;
      height: 70%;
      background-color: var(--accent);
      transform: translateY(-50%);
    }
    
    .section-title {
      font-weight: 600;
      margin-bottom: 0;
      padding-left: var(--spacing-sm);
    }
    
    .section-action {
      color: var(--primary);
      font-size: 0.875rem;
      font-weight: 500;
      display: flex;
      align-items: center;
    }
    
    .section-action .material-icons-round {
      font-size: 1rem;
      margin-left: var(--spacing-xs);
    }
    
    /* Card Styles */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: var(--spacing-lg);
    }
    
    .card-scroll {
      display: flex;
      overflow-x: auto;
      padding: var(--spacing-md) 0;
      scroll-snap-type: x mandatory;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE and Edge */
      gap: var(--spacing-md);
    }
    
    .card-scroll::-webkit-scrollbar {
      display: none; /* Chrome, Safari, Opera */
    }
    
    .card {
      background-color: var(--surface-elevated);
      border-radius: var(--radius-md);
      overflow: hidden;
      box-shadow: var(--card-shadow);
      transition: var(--transition-standard);
      scroll-snap-align: start;
      flex: 0 0 280px;
      position: relative;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: var(--card-hover-shadow);
    }
    
    .card-image {
      width: 100%;
      height: 160px;
      object-fit: cover;
      background-color: #e2e8f0; /* Fallback background color */
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    
    .card-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .card-image .placeholder-icon {
      color: var(--text-tertiary);
      font-size: 48px;
      opacity: 0.5;
    }
    
    .card-content {
      padding: var(--spacing-md);
    }
    
    .card-title {
      font-size: 1.1rem;
      margin-bottom: var(--spacing-xs);
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .card-description {
      font-size: 0.875rem;
      color: var(--text-tertiary);
      margin-bottom: var(--spacing-sm);
    }
    
    .card-meta {
      display: flex;
      align-items: center;
      font-size: 0.75rem;
      color: var(--text-tertiary);
    }
    
    .card-meta .material-icons-round {
      font-size: 0.875rem;
      margin-right: var(--spacing-xs);
    }
    
    /* Bottom navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: var(--surface-elevated);
      display: flex;
      justify-content: space-around;
      align-items: center;
      height: 70px;
      box-shadow: var(--nav-shadow);
      z-index: 2001; /* Higher than modals to ensure always visible */
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .nav-item {
      color: var(--text-tertiary);
      text-decoration: none;
      font-size: 0.75rem;
      font-weight: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: var(--transition-standard);
      padding: var(--spacing-xs);
    }

    .nav-item .material-icons-round {
      font-size: 1.5rem;
      margin-bottom: var(--spacing-xs);
    }

    .nav-item.active {
      color: var(--primary);
    }

    .nav-item:hover {
      color: var(--primary-light);
    }
    
    /* Bible Modal Styles - UPDATED FOR FULL SCREEN */
    .bible-modal {
      position: fixed;
      top: 0;
      bottom: 70px; /* Leave space for bottom nav */
      left: 0;
      right: 0;
      height: 0;
      width: 100%;
      background-color: var(--white);
      z-index: 2000;
      overflow: hidden;
      transition: height 0.5s cubic-bezier(0.16, 1, 0.3, 1);
      box-shadow: var(--shadow-xl);
      display: flex;
      flex-direction: column;
      border-radius: 0;
    }
    
    .bible-modal.open {
      height: calc(100vh - 70px); /* Full viewport height minus bottom nav */
    }
    
    .bible-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing-md);
      border-bottom: 1px solid var(--divider);
    }
    
    .bible-modal-title {
      font-weight: 600;
      margin-bottom: 0;
    }
    
    .bible-modal-close {
      background: none;
      border: none;
      color: var(--text-tertiary);
      cursor: pointer;
    }
    
    .bible-modal-close:hover {
      color: var(--text-primary);
    }
    
    .bible-modal-content {
      flex: 1;
      overflow: hidden;
      position: relative;
    }
    
    .bible-iframe-container {
      width: 100%;
      height: 100%;
      position: relative;
    }
    
    .bible-iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    
    .version-button {
      background-color: var(--primary);
      color: var(--text-on-primary);
      border: none;
      border-radius: var(--radius-full);
      padding: var(--spacing-xs) var(--spacing-md);
      font-size: 0.875rem;
      font-weight: 500;
      display: flex;
      align-items: center;
    }
    
    .version-button:hover {
      background-color: var(--primary-light);
    }
    
    .version-button .material-icons-round {
      font-size: 1rem;
      margin-left: var(--spacing-xs);
    }
    
    .version-selector {
      position: absolute;
      top: 60px;
      right: var(--spacing-md);
      width: 320px;
      max-width: 90vw;
      background-color: var(--surface-elevated);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-xl);
      z-index: 2100;
      display: none;
      overflow: hidden;
    }
    
    .version-selector-header {
      padding: var(--spacing-md);
      border-bottom: 1px solid var(--divider);
    }
    
    .version-search {
      width: 100%;
      padding: var(--spacing-sm) var(--spacing-md);
      border: 1px solid var(--divider);
      border-radius: var(--radius-full);
      font-family: 'Poppins', sans-serif;
      font-size: 0.875rem;
    }
    
    .version-categories {
      display: flex;
      padding: var(--spacing-sm) var(--spacing-md);
      border-bottom: 1px solid var(--divider);
    }
    
    .version-category {
      padding: var(--spacing-xs) var(--spacing-sm);
      margin-right: var(--spacing-sm);
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition-standard);
      background-color: transparent;
      border: none;
    }
    
    .version-category.active {
      background-color: var(--primary);
      color: var(--text-on-primary);
    }
    
    .version-list {
      max-height: 400px;
      overflow-y: auto;
      padding: var(--spacing-sm);
    }
    
    .version-item {
      display: flex;
      flex-direction: column;
      padding: var(--spacing-sm);
      border-radius: var(--radius-md);
      margin-bottom: var(--spacing-xs);
      cursor: pointer;
      transition: var(--transition-standard);
      text-align: left;
      background: none;
      border: none;
      width: 100%;
    }
    
    .version-item:hover {
      background-color: var(--surface-variant);
    }
    
    .version-item.preferred {
      border-left: 3px solid var(--primary);
    }
    
    .version-abbr {
      font-weight: 600;
      font-size: 0.875rem;
      color: var(--text-primary);
    }
    
    .version-full-name {
      font-size: 0.75rem;
      color: var(--text-secondary);
    }
    
    .version-publisher {
      font-size: 0.7rem;
      color: var(--text-tertiary);
    }
    
    .no-results {
      padding: var(--spacing-md);
      text-align: center;
      color: var(--text-tertiary);
      font-size: 0.875rem;
    }
    
    .guidance-message {
      position: absolute;
      bottom: var(--spacing-lg);
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: var(--spacing-sm) var(--spacing-md);
      border-radius: var(--radius-full);
      font-size: 0.875rem;
      z-index: 2200;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    /* Search Modal Styles */
    .search-modal {
      position: fixed;
      top: 0;
      bottom: 70px; /* Leave space for bottom nav */
      left: 0;
      right: 0;
      height: 0;
      width: 100%;
      background-color: var(--white);
      z-index: 2000;
      overflow: hidden;
      transition: height 0.5s cubic-bezier(0.16, 1, 0.3, 1);
      box-shadow: var(--shadow-xl);
      display: flex;
      flex-direction: column;
      border-radius: 0;
    }
    
    .search-modal.open {
      height: calc(100vh - 70px); /* Full viewport height minus bottom nav */
    }
    
    .search-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--spacing-md);
      border-bottom: 1px solid var(--divider);
    }
    
    .search-modal-title {
      font-weight: 600;
      margin-bottom: 0;
    }
    
    .search-modal-close {
      background: none;
      border: none;
      color: var(--text-tertiary);
      cursor: pointer;
    }
    
    .search-modal-close:hover {
      color: var(--text-primary);
    }
    
    .search-modal-content {
      flex: 1;
      overflow-y: auto;
      padding: var(--spacing-md);
    }
    
    .search-input-container {
      position: relative;
      margin-bottom: var(--spacing-lg);
    }
    
    .search-input {
      width: 100%;
      padding: var(--spacing-md) var(--spacing-md) var(--spacing-md) 50px;
      border: 1px solid var(--divider);
      border-radius: var(--radius-full);
      font-family: 'Poppins', sans-serif;
      font-size: 1rem;
      box-shadow: var(--shadow-sm);
    }
    
    .search-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: var(--shadow-md);
    }
    
    .search-icon {
      position: absolute;
      left: var(--spacing-md);
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-tertiary);
    }
    
    .search-results-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-md);
      color: var(--text-tertiary);
      font-size: 0.875rem;
    }
    
    .search-results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: var(--spacing-md);
    }
    
    .search-no-results {
      text-align: center;
      padding: var(--spacing-xxl) 0;
      color: var(--text-tertiary);
      display: none;
    }
    
    .search-no-results h3 {
      margin-bottom: var(--spacing-md);
      color: var(--text-secondary);
    }
    
    .search-no-results p {
      max-width: 500px;
      margin: 0 auto var(--spacing-md);
    }
    
    /* Responsive Styles */
    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
      }
      
      h2 {
        font-size: 1.75rem;
      }
      
      h3 {
        font-size: 1.5rem;
      }
      
      .section {
        padding: var(--spacing-lg) 0;
      }
      
      .card-grid {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
      
      .card-scroll .card {
        flex: 0 0 240px;
      }
      
      .version-selector {
        width: 280px;
      }
    }
    
    @media (max-width: 480px) {
      h1 {
        font-size: 1.75rem;
      }
      
      h2 {
        font-size: 1.5rem;
      }
      
      .card-grid {
        grid-template-columns: 1fr;
      }
      
      .card-scroll .card {
        flex: 0 0 220px;
      }
      
      .version-selector {
        width: 90vw;
        right: 5vw;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <span class="material-icons-round">spa</span>
          The Vine
        </div>
        <div class="header-actions">
          <div class="notification-badge">
            <span class="material-icons-round">notifications</span>
            <span class="badge">3</span>
          </div>
          <span class="material-icons-round">account_circle</span>
        </div>
      </div>
    </div>
  </header>
  
  <!-- Main Content -->
  <main class="container">
    <!-- Featured Courses Section -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Featured Courses</h2>
        <a href="#" class="section-action">
          View All
          <span class="material-icons-round">arrow_forward</span>
        </a>
      </div>
      <div class="card-scroll">
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?bible,study" alt="Course" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>menu_book</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Foundations of Faith</h3>
            <p class="card-description">Explore the core principles of Christian faith and practice.</p>
            <div class="card-meta">
              <span class="material-icons-round">access_time</span>
              8 weeks
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?prayer" alt="Course" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>menu_book</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Prayer Essentials</h3>
            <p class="card-description">Develop a deeper prayer life through biblical principles.</p>
            <div class="card-meta">
              <span class="material-icons-round">access_time</span>
              6 weeks
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?gospel" alt="Course" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>menu_book</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Understanding the Gospels</h3>
            <p class="card-description">A comprehensive study of Matthew, Mark, Luke, and John.</p>
            <div class="card-meta">
              <span class="material-icons-round">access_time</span>
              10 weeks
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?worship" alt="Course" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>menu_book</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Worship in Spirit & Truth</h3>
            <p class="card-description">Discover biblical principles for authentic worship.</p>
            <div class="card-meta">
              <span class="material-icons-round">access_time</span>
              4 weeks
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?leadership" alt="Course" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>menu_book</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Christian Leadership</h3>
            <p class="card-description">Biblical principles for effective servant leadership.</p>
            <div class="card-meta">
              <span class="material-icons-round">access_time</span>
              8 weeks
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Topics Section -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Topics</h2>
        <a href="#" class="section-action">
          View All
          <span class="material-icons-round">arrow_forward</span>
        </a>
      </div>
      <div class="card-scroll">
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?bible,study" alt="Topic" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>category</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Biblical Studies</h3>
            <p class="card-description">In-depth exploration of Scripture and its context.</p>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?christian,life" alt="Topic" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>category</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Christian Life</h3>
            <p class="card-description">Practical guidance for living out your faith daily.</p>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?church" alt="Topic" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>category</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Church</h3>
            <p class="card-description">Understanding the body of Christ and its mission.</p>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?family" alt="Topic" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>category</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Family</h3>
            <p class="card-description">Biblical principles for marriage, parenting, and relationships.</p>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?theology" alt="Topic" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>category</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Theology</h3>
            <p class="card-description">Exploring the nature of God and Christian doctrine.</p>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?ministry" alt="Topic" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>category</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Ministry</h3>
            <p class="card-description">Resources for serving others in various contexts.</p>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?apologetics" alt="Topic" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>category</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Apologetics</h3>
            <p class="card-description">Defending the faith with reason and evidence.</p>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?missions" alt="Topic" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>category</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Missions</h3>
            <p class="card-description">Spreading the gospel locally and globally.</p>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Popular Series Section -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Popular Series</h2>
        <a href="#" class="section-action">
          View All
          <span class="material-icons-round">arrow_forward</span>
        </a>
      </div>
      <div class="card-scroll">
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?sermon" alt="Series" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>video_library</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">The Beatitudes</h3>
            <p class="card-description">Jesus' teachings on true happiness and blessing.</p>
            <div class="card-meta">
              <span class="material-icons-round">video_library</span>
              8 episodes
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?fruit,spirit" alt="Series" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>video_library</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Fruit of the Spirit</h3>
            <p class="card-description">Cultivating godly character in everyday life.</p>
            <div class="card-meta">
              <span class="material-icons-round">video_library</span>
              9 episodes
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?armor,god" alt="Series" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>video_library</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Armor of God</h3>
            <p class="card-description">Standing firm against spiritual warfare.</p>
            <div class="card-meta">
              <span class="material-icons-round">video_library</span>
              6 episodes
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?prayer,power" alt="Series" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>video_library</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Power of Prayer</h3>
            <p class="card-description">Transforming your prayer life for greater impact.</p>
            <div class="card-meta">
              <span class="material-icons-round">video_library</span>
              5 episodes
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?faith,action" alt="Series" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>video_library</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Faith in Action</h3>
            <p class="card-description">Living out your beliefs through practical service.</p>
            <div class="card-meta">
              <span class="material-icons-round">video_library</span>
              7 episodes
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Sermon/Lesson Series Section -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Sermon/Lesson Series</h2>
        <a href="#" class="section-action">
          View All
          <span class="material-icons-round">arrow_forward</span>
        </a>
      </div>
      <div class="card-scroll">
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?sermon,series" alt="Sermon Series" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>video_library</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Kingdom Principles</h3>
            <p class="card-description">Understanding how God's kingdom operates in our lives.</p>
            <div class="card-meta">
              <span class="material-icons-round">video_library</span>
              12 lessons
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?gospel,truth" alt="Sermon Series" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>video_library</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Gospel Foundations</h3>
            <p class="card-description">Exploring the core truths of the Christian faith.</p>
            <div class="card-meta">
              <span class="material-icons-round">video_library</span>
              8 lessons
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?spiritual,growth" alt="Sermon Series" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>video_library</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Spiritual Disciplines</h3>
            <p class="card-description">Practices that foster growth and maturity in Christ.</p>
            <div class="card-meta">
              <span class="material-icons-round">video_library</span>
              10 lessons
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Steven Best Devotionals Section -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Steven Best Devotionals</h2>
        <a href="#" class="section-action">
          View All
          <span class="material-icons-round">arrow_forward</span>
        </a>
      </div>
      <div class="card-scroll">
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?devotional,morning" alt="Devotional" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>menu_book</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Daily Strength</h3>
            <p class="card-description">Finding God's power for everyday challenges.</p>
            <div class="card-meta">
              <span class="material-icons-round">menu_book</span>
              30 days
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?prayer,journal" alt="Devotional" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>menu_book</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Quiet Moments</h3>
            <p class="card-description">Reflections for deeper communion with God.</p>
            <div class="card-meta">
              <span class="material-icons-round">menu_book</span>
              21 days
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?psalms" alt="Devotional" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>menu_book</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Psalms of Hope</h3>
            <p class="card-description">Finding comfort and inspiration in the Psalms.</p>
            <div class="card-meta">
              <span class="material-icons-round">menu_book</span>
              15 days
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Recent Additions Section -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Recent Additions</h2>
        <a href="#" class="section-action">
          View All
          <span class="material-icons-round">arrow_forward</span>
        </a>
      </div>
      <div class="card-scroll">
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?bible,new" alt="Recent" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>new_releases</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Revelation Unveiled</h3>
            <p class="card-description">Understanding the book of Revelation in context.</p>
            <div class="card-meta">
              <span class="material-icons-round">access_time</span>
              Added 2 days ago
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?worship,music" alt="Recent" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>new_releases</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Worship Workshop</h3>
            <p class="card-description">Practical training for worship leaders and teams.</p>
            <div class="card-meta">
              <span class="material-icons-round">access_time</span>
              Added 5 days ago
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?marriage" alt="Recent" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>new_releases</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Marriage Matters</h3>
            <p class="card-description">Building a Christ-centered marriage that lasts.</p>
            <div class="card-meta">
              <span class="material-icons-round">access_time</span>
              Added 1 week ago
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-image">
            <img src="https://source.unsplash.com/random/600x400/?discipleship" alt="Recent" onerror="this.onerror=null; this.style.display='none'; this.parentNode.innerHTML += '<span class=\'material-icons-round placeholder-icon\'>new_releases</span>';">
          </div>
          <div class="card-content">
            <h3 class="card-title">Discipleship Essentials</h3>
            <p class="card-description">Core practices for following Jesus faithfully.</p>
            <div class="card-meta">
              <span class="material-icons-round">access_time</span>
              Added 2 weeks ago
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  
  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a href="#" class="nav-item active" id="explore-nav-item">
      <span class="material-icons-round">explore</span>
      Explore
    </a>
    <a href="#" class="nav-item" id="search-nav-item">
      <span class="material-icons-round">search</span>
      Search
    </a>
    <a href="#" class="nav-item" id="bible-nav-item">
      <span class="material-icons-round">menu_book</span>
      Bible
    </a>
    <a href="#" class="nav-item">
      <span class="material-icons-round">bookmark</span>
      Saved
    </a>
  </nav>
  
  <!-- Bible Modal -->
  <div class="bible-modal" id="bible-modal">
    <div class="bible-modal-header">
      <h3 class="bible-modal-title">Bible</h3>
      <div style="display: flex; align-items: center;">
        <button class="version-button" id="version-button">
          <span id="current-version">NIV</span>
          <span class="material-icons-round">arrow_drop_down</span>
        </button>
        <button class="bible-modal-close" id="bible-modal-close">
          <span class="material-icons-round">close</span>
        </button>
      </div>
    </div>
    <div class="bible-modal-content">
      <div class="bible-iframe-container">
        <iframe src="https://www.bible.com/bible/111/GEN.1.NIV" class="bible-iframe" id="bible-iframe" allowfullscreen></iframe>
      </div>
      <div class="guidance-message" id="guidance-message">
        Tap the version button to change translations
      </div>
    </div>
  </div>
  <div class="bible-modal-overlay" id="bible-modal-overlay"></div>
  
  <!-- Version Selector -->
  <div class="version-selector" id="version-selector">
    <div class="version-selector-header">
      <input type="text" class="version-search" id="version-search" placeholder="Search versions...">
    </div>
    <div class="version-categories">
      <button class="version-category active" data-category="preferred">Preferred</button>
      <button class="version-category" data-category="english">English</button>
      <button class="version-category" data-category="all">All Versions</button>
    </div>
    <div class="version-list" id="version-list">
      <!-- Version items will be populated here -->
    </div>
  </div>
  
  <!-- Search Modal -->
  <div class="search-modal" id="search-modal">
    <div class="search-modal-header">
      <h3 class="search-modal-title">Search</h3>
      <button class="search-modal-close" id="search-modal-close">
        <span class="material-icons-round">close</span>
      </button>
    </div>
    <div class="search-modal-content">
      <div class="search-input-container">
        <span class="material-icons-round search-icon">search</span>
        <input type="text" class="search-input" id="search-input" placeholder="Search by title...">
      </div>
      <div class="search-results-info">
        <span id="search-result-count">0 results</span>
      </div>
      <div class="search-results-grid" id="search-results">
        <!-- Search results will be populated here -->
      </div>
      <div class="search-no-results" id="search-no-results">
        <h3>No results found</h3>
        <p>Try adjusting your search terms or browse our categories to find what you're looking for.</p>
      </div>
    </div>
  </div>
  <div class="search-modal-overlay" id="search-modal-overlay"></div>
  
  <!-- Bible Versions Data -->
  <script>
    // Preferred Bible Versions
    const preferredBibleVersions = [
      { name: 'NIV', fullName: 'New International Version', publisher: 'Biblica', id: '111-niv' },
      { name: 'KJV', fullName: 'King James Version', publisher: 'Public Domain', id: '1-kjv' },
      { name: 'NLT', fullName: 'New Living Translation', publisher: 'Tyndale House', id: '116-nlt' },
      { name: 'ESV', fullName: 'English Standard Version', publisher: 'Crossway', id: '59-esv' },
      { name: 'TPT', fullName: 'The Passion Translation', publisher: 'BroadStreet Publishing', id: '1849-tpt' },
      { name: 'MSG', fullName: 'The Message', publisher: 'NavPress Publishing', id: '97-msg' },
      { name: 'AMPC', fullName: 'Amplified Bible, Classic Edition', publisher: 'The Lockman Foundation', id: '8-ampc' }
    ];
    
    // English Bible Versions (sample)
    const englishBibleVersions = [
      { name: 'NIV', fullName: 'New International Version', publisher: 'Biblica', id: '111-niv' },
      { name: 'KJV', fullName: 'King James Version', publisher: 'Public Domain', id: '1-kjv' },
      { name: 'NLT', fullName: 'New Living Translation', publisher: 'Tyndale House', id: '116-nlt' },
      { name: 'ESV', fullName: 'English Standard Version', publisher: 'Crossway', id: '59-esv' },
      { name: 'TPT', fullName: 'The Passion Translation', publisher: 'BroadStreet Publishing', id: '1849-tpt' },
      { name: 'MSG', fullName: 'The Message', publisher: 'NavPress Publishing', id: '97-msg' },
      { name: 'AMPC', fullName: 'Amplified Bible, Classic Edition', publisher: 'The Lockman Foundation', id: '8-ampc' },
      { name: 'NASB', fullName: 'New American Standard Bible', publisher: 'The Lockman Foundation', id: '100-nasb' },
      { name: 'NKJV', fullName: 'New King James Version', publisher: 'Thomas Nelson', id: '114-nkjv' },
      { name: 'CSB', fullName: 'Christian Standard Bible', publisher: 'Holman Bible Publishers', id: '1713-csb' },
      { name: 'NRSV', fullName: 'New Revised Standard Version', publisher: 'National Council of Churches', id: '2016-nrsv' },
      { name: 'AMP', fullName: 'Amplified Bible', publisher: 'The Lockman Foundation', id: '1588-amp' },
      { name: 'CEV', fullName: 'Contemporary English Version', publisher: 'American Bible Society', id: '392-cev' },
      { name: 'GNT', fullName: 'Good News Translation', publisher: 'American Bible Society', id: '416-gnb' },
      { name: 'ICB', fullName: 'International Children\'s Bible', publisher: 'Thomas Nelson', id: '1359-icb' },
      { name: 'ISV', fullName: 'International Standard Version', publisher: 'ISV Foundation', id: '1421-isv' },
      { name: 'PHILLIPS', fullName: 'Phillips New Testament', publisher: 'Public Domain', id: '1223-phillips' },
      { name: 'TLB', fullName: 'The Living Bible', publisher: 'Tyndale House', id: '133-tlb' },
      { name: 'VOICE', fullName: 'The Voice', publisher: 'Thomas Nelson', id: '2079-voice' },
      { name: 'WEB', fullName: 'World English Bible', publisher: 'Public Domain', id: '206-web' }
    ];
    
    // All Bible Versions (this would be a much larger list in reality)
    const allBibleVersions = [
      ...englishBibleVersions,
      { name: 'RVR1960', fullName: 'Reina-Valera 1960', publisher: 'Sociedades Bíblicas Unidas', id: '149-rvr1960' },
      { name: 'NVI', fullName: 'Nueva Versión Internacional', publisher: 'Biblica', id: '128-nvi' },
      { name: 'LSG', fullName: 'Louis Segond', publisher: 'Public Domain', id: '93-lsg' },
      { name: 'CUV', fullName: 'Chinese Union Version', publisher: 'Public Domain', id: '36-cuv' },
      { name: 'JLB', fullName: 'Japanese Living Bible', publisher: 'Tyndale House', id: '83-jlb' },
      { name: 'KSV', fullName: 'Korean Standard Version', publisher: 'Korean Bible Society', id: '88-ksv' },
      { name: 'NOG', fullName: 'Names of God Bible', publisher: 'Baker Publishing Group', id: '2017-nog' },
      { name: 'VULGATE', fullName: 'Biblia Sacra Vulgata', publisher: 'Public Domain', id: '823-vulgate' },
      { name: 'LXX', fullName: 'Septuagint', publisher: 'Public Domain', id: '817-lxx' },
      { name: 'SBLGNT', fullName: 'SBL Greek New Testament', publisher: 'Society of Biblical Literature', id: '156-sblgnt' },
      { name: 'WLC', fullName: 'Westminster Leningrad Codex', publisher: 'Public Domain', id: '446-wlc' },
      { name: 'LBLA', fullName: 'La Biblia de las Américas', publisher: 'The Lockman Foundation', id: '1540-lbla' },
      { name: 'NLV', fullName: 'Neues Leben', publisher: 'SCM R. Brockhaus', id: '2079-nlv' },
      { name: 'BDS', fullName: 'Bible du Semeur', publisher: 'Biblica', id: '21-bds' },
      { name: 'ERV-RU', fullName: 'Russian Easy-to-Read Version', publisher: 'Bible League International', id: '2329-erv-ru' },
      { name: 'SZ', fullName: 'Słowo Życia', publisher: 'Biblica', id: '1540-sz' },
      { name: 'NR06', fullName: 'Nuova Riveduta 2006', publisher: 'Società Biblica di Ginevra', id: '105-nr06' },
      { name: 'HTB', fullName: 'Het Boek', publisher: 'Biblica', id: '75-htb' },
      { name: 'DNB1930', fullName: 'Det Norsk Bibelselskap 1930', publisher: 'Public Domain', id: '44-dnb1930' },
      { name: 'BPH', fullName: 'Bíblia Português Hoje', publisher: 'Sociedade Bíblica do Brasil', id: '1715-bph' },
      { name: 'SVL', fullName: 'Nya Levande Bibeln', publisher: 'Semnos Förlag', id: '156-svl' },
      { name: 'YLT', fullName: 'Young\'s Literal Translation', publisher: 'Public Domain', id: '821-ylt' },
      { name: 'DARBY', fullName: 'Darby Translation', publisher: 'Public Domain', id: '478-darby' },
      { name: 'ASV', fullName: 'American Standard Version', publisher: 'Public Domain', id: '12-asv' },
      { name: 'WYC', fullName: 'Wycliffe Bible', publisher: 'Public Domain', id: '2407-wyc' }
    ];
  </script>
  
  <!-- Main JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Bible Modal Elements
      const bibleNavItem = document.getElementById('bible-nav-item');
      const bibleModal = document.getElementById('bible-modal');
      const bibleModalClose = document.getElementById('bible-modal-close');
      const bibleModalOverlay = document.getElementById('bible-modal-overlay');
      const bibleIframe = document.getElementById('bible-iframe');
      const versionButton = document.getElementById('version-button');
      const versionSelector = document.getElementById('version-selector');
      const versionList = document.getElementById('version-list');
      const versionSearch = document.getElementById('version-search');
      const currentVersionSpan = document.getElementById('current-version');
      const guidanceMessage = document.getElementById('guidance-message');
      const versionCategories = document.querySelectorAll('.version-category');
      
      // Navigation Elements
      const exploreNavItem = document.getElementById('explore-nav-item');
      const savedNavItem = document.querySelector('.nav-item:nth-child(4)'); // Saved nav item
      
      // Search Modal Elements
      const searchNavItem = document.getElementById('search-nav-item');
      const searchModal = document.getElementById('search-modal');
      const searchModalClose = document.getElementById('search-modal-close');
      const searchModalOverlay = document.getElementById('search-modal-overlay');
      const searchInput = document.getElementById('search-input');
      const searchResults = document.getElementById('search-results');
      const searchNoResults = document.getElementById('search-no-results');
      const searchResultCount = document.getElementById('search-result-count');
      
      // Current state
      let currentVersion = 'NIV';
      let currentVersionId = '111';
      let currentCategory = 'preferred';
      let searchTerm = '';
      
      // Function to close all modals and reset UI state
      function closeAllModals() {
        // Close Bible modal
        bibleModal.classList.remove('open');
        bibleModalOverlay.classList.remove('open');
        versionSelector.style.display = 'none';
        
        // Close Search modal
        searchModal.classList.remove('open');
        searchModalOverlay.classList.remove('open');
      }
      
      // Function to set active nav item
      function setActiveNavItem(activeItem) {
        document.querySelectorAll('.nav-item').forEach(item => {
          item.classList.remove('active');
        });
        activeItem.classList.add('active');
      }
      
      // Explore navigation - always routes to main screen
      exploreNavItem.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Close any open modals
        closeAllModals();
        
        // Scroll to top of main content
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
        
        // Set active state on explore nav item
        setActiveNavItem(this);
      });
      
      // Show guidance message briefly when Bible modal is opened
      function showGuidanceMessage() {
        guidanceMessage.style.opacity = '1';
        setTimeout(() => {
          guidanceMessage.style.opacity = '0';
        }, 5000);
      }
      
      // Open Bible Modal
      bibleNavItem.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Close any open modals first
        closeAllModals();
        
        // Open Bible modal
        bibleModal.classList.add('open');
        bibleModalOverlay.classList.add('open');
        showGuidanceMessage();
        
        // Set active state on bible nav item
        setActiveNavItem(this);
      });
      
      // Close Bible Modal
      bibleModalClose.addEventListener('click', function() {
        bibleModal.classList.remove('open');
        bibleModalOverlay.classList.remove('open');
        versionSelector.style.display = 'none';
        
        // Set active state back to explore
        setActiveNavItem(exploreNavItem);
      });
      
      bibleModalOverlay.addEventListener('click', function() {
        bibleModal.classList.remove('open');
        bibleModalOverlay.classList.remove('open');
        versionSelector.style.display = 'none';
        
        // Set active state back to explore
        setActiveNavItem(exploreNavItem);
      });
      
      // Toggle Version Selector
      versionButton.addEventListener('click', function(e) {
        e.stopPropagation();
        if (versionSelector.style.display === 'block') {
          versionSelector.style.display = 'none';
        } else {
          versionSelector.style.display = 'block';
          renderVersionList();
        }
      });
      
      // Close version selector when clicking outside
      document.addEventListener('click', function(e) {
        if (versionSelector.style.display === 'block' && 
            !versionSelector.contains(e.target) && 
            e.target !== versionButton) {
          versionSelector.style.display = 'none';
        }
      });
      
      // Prevent clicks inside version selector from closing it
      versionSelector.addEventListener('click', function(e) {
        e.stopPropagation();
      });
      
      // Handle version search
      versionSearch.addEventListener('input', function() {
        searchTerm = this.value.toLowerCase();
        renderVersionList();
      });
      
      // Handle category selection
      versionCategories.forEach(category => {
        category.addEventListener('click', function() {
          versionCategories.forEach(c => c.classList.remove('active'));
          this.classList.add('active');
          currentCategory = this.dataset.category;
          renderVersionList();
        });
      });
      
      // Render the version list based on current filters
      function renderVersionList() {
        versionList.innerHTML = '';
        
        let versionsToShow;
        if (currentCategory === 'preferred') {
          versionsToShow = preferredBibleVersions;
        } else if (currentCategory === 'english') {
          versionsToShow = englishBibleVersions;
        } else {
          versionsToShow = allBibleVersions;
        }
        
        // Apply search filter if there's a search term
        if (searchTerm) {
          versionsToShow = versionsToShow.filter(version => 
            version.name.toLowerCase().includes(searchTerm) || 
            version.fullName.toLowerCase().includes(searchTerm) ||
            version.publisher.toLowerCase().includes(searchTerm)
          );
        }
        
        // Show message if no results
        if (versionsToShow.length === 0) {
          const noResults = document.createElement('div');
          noResults.className = 'no-results';
          noResults.textContent = 'No versions found matching your search.';
          versionList.appendChild(noResults);
          return;
        }
        
        // Create version items
        versionsToShow.forEach(version => {
          const versionItem = document.createElement('button');
          versionItem.className = 'version-item';
          if (isPreferredVersion(version.name)) {
            versionItem.classList.add('preferred');
          }
          
          const versionAbbr = document.createElement('span');
          versionAbbr.className = 'version-abbr';
          versionAbbr.textContent = version.name;
          
          const versionFullName = document.createElement('span');
          versionFullName.className = 'version-full-name';
          versionFullName.textContent = version.fullName;
          
          const versionPublisher = document.createElement('span');
          versionPublisher.className = 'version-publisher';
          versionPublisher.textContent = version.publisher;
          
          versionItem.appendChild(versionAbbr);
          versionItem.appendChild(versionFullName);
          versionItem.appendChild(versionPublisher);
          
          versionItem.addEventListener('click', function() {
            selectVersion(version);
          });
          
          versionList.appendChild(versionItem);
        });
      }
      
      // Check if a version is in the preferred list
      function isPreferredVersion(abbr) {
        return preferredBibleVersions.some(v => v.name === abbr);
      }
      
      // Select a version
      function selectVersion(version) {
        currentVersion = version.name;
        currentVersionId = version.id.split('-')[0];
        currentVersionSpan.textContent = currentVersion;
        versionSelector.style.display = 'none';
        
        // Update iframe URL
        const currentUrl = bibleIframe.src;
        const urlParts = currentUrl.split('/');
        // Find the version ID part (usually after /bible/)
        for (let i = 0; i < urlParts.length; i++) {
          if (urlParts[i] === 'bible' && i + 1 < urlParts.length) {
            // Replace the version ID
            urlParts[i + 1] = currentVersionId;
            break;
          }
        }
        bibleIframe.src = urlParts.join('/');
      }
      
      // Open Search Modal
      searchNavItem.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Close any open modals first
        closeAllModals();
        
        // Open Search modal
        searchModal.classList.add('open');
        searchModalOverlay.classList.add('open');
        searchInput.focus();
        
        // Set active state on search nav item
        setActiveNavItem(this);
      });
      
      // Close Search Modal
      searchModalClose.addEventListener('click', function() {
        searchModal.classList.remove('open');
        searchModalOverlay.classList.remove('open');
        
        // Set active state back to explore
        setActiveNavItem(exploreNavItem);
      });
      
      searchModalOverlay.addEventListener('click', function() {
        searchModal.classList.remove('open');
        searchModalOverlay.classList.remove('open');
        
        // Set active state back to explore
        setActiveNavItem(exploreNavItem);
      });
      
      // Saved navigation
      savedNavItem.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Close any open modals
        closeAllModals();
        
        // Set active state on saved nav item
        setActiveNavItem(this);
        
        // Future implementation for saved content
        // For now, just scroll to top
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
      
      // Collect all content items for search
      function collectSearchableContent() {
        const searchableItems = [];
        
        // Get all cards from the page
        document.querySelectorAll('.card').forEach(card => {
          const title = card.querySelector('.card-title')?.textContent || '';
          const description = card.querySelector('.card-description')?.textContent || '';
          const image = card.querySelector('.card-image img')?.src || '';
          const meta = card.querySelector('.card-meta')?.textContent || '';
          
          searchableItems.push({
            title,
            description,
            image,
            meta
          });
        });
        
        return searchableItems;
      }
      
      // Search content based on input
      function searchContent(term) {
        if (!term) {
          return [];
        }
        
        const items = collectSearchableContent();
        return items.filter(item => 
          item.title.toLowerCase().includes(term.toLowerCase())
        );
      }
      
      // Render search results
      function renderSearchResults(results) {
        searchResults.innerHTML = '';
        
        if (results.length === 0) {
          searchNoResults.style.display = 'block';
          searchResultCount.textContent = '0 results';
          return;
        }
        
        searchNoResults.style.display = 'none';
        searchResultCount.textContent = `${results.length} results`;
        
        results.forEach(result => {
          const resultCard = document.createElement('div');
          resultCard.className = 'card';
          
          const resultImageContainer = document.createElement('div');
          resultImageContainer.className = 'card-image';
          
          const resultImage = document.createElement('img');
          resultImage.src = result.image;
          resultImage.alt = result.title;
          resultImage.onerror = function() {
            this.onerror = null;
            this.style.display = 'none';
            resultImageContainer.innerHTML += '<span class="material-icons-round placeholder-icon">search</span>';
          };
          
          resultImageContainer.appendChild(resultImage);
          
          const resultContent = document.createElement('div');
          resultContent.className = 'card-content';
          
          const resultTitle = document.createElement('h3');
          resultTitle.className = 'card-title';
          resultTitle.textContent = result.title;
          
          const resultDescription = document.createElement('p');
          resultDescription.className = 'card-description';
          resultDescription.textContent = result.description;
          
          resultContent.appendChild(resultTitle);
          resultContent.appendChild(resultDescription);
          
          if (result.meta) {
            const resultMeta = document.createElement('div');
            resultMeta.className = 'card-meta';
            resultMeta.textContent = result.meta;
            resultContent.appendChild(resultMeta);
          }
          
          resultCard.appendChild(resultImageContainer);
          resultCard.appendChild(resultContent);
          
          searchResults.appendChild(resultCard);
        });
      }
      
      // Handle search input
      searchInput.addEventListener('input', function() {
        const term = this.value.trim();
        const results = searchContent(term);
        renderSearchResults(results);
      });
      
      // Initialize with empty search results
      renderSearchResults([]);
    });
  </script>
</body>
</html>
